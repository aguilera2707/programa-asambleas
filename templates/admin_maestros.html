<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Maestros del ciclo</title>
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin_maestros.css') }}">
</head>
<body>
<div class="container">
    <div class="top-bar">
        <a href="{{ url_for('nom.panel_admin') }}" class="btn-volver">‚Æå Volver al panel</a>
        
    </div>
            <h1>Maestros del ciclo {{ ciclo.nombre if ciclo else '‚Äî' }}</h1>
    <!-- Bot√≥n de creaci√≥n manual -->
    <div style="text-align:right; margin-bottom:15px;">
        <a href="{{ url_for('admin_bp.nuevo_maestro') }}" class="btn-create">‚ûï Crear manualmente</a>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div class="toast-container">
        {% for category, message in messages %}
            <div class="toast toast-{{ category }}">{{ message }}</div>
        {% endfor %}
        </div>
    {% endif %}
    {% endwith %}

    {% if ciclo %}
    <form action="{{ url_for('admin_bp.importar_maestros_ciclo') }}" method="POST" enctype="multipart/form-data">
        <input type="file" name="file" accept=".xlsx,.csv" required>
        <button type="submit">Importar maestros</button>
    </form>

    <h2>Listado de maestros</h2>
    <table>
        <thead>
        <tr>
            <th>Nombre</th>
            <th>Correo</th>
            <th>Ciclo</th>
            <th style="text-align:center;">Acciones</th>
        </tr>
        </thead>
        <tbody>
        {% for m in maestros %}
        <tr>
            <td>{{ m.nombre }}</td>
            <td>{{ m.correo }}</td>
            <td>{{ ciclo.nombre }}</td>
            <td style="text-align:center;">
                <a href="{{ url_for('admin_bp.editar_maestro_vista', id=m.id) }}" class="btn-edit">‚úèÔ∏è</a>
                <form action="{{ url_for('admin_bp.eliminar_maestro', id=m.id) }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn-delete" onclick="return confirm('¬øEliminar al maestro {{ m.nombre }}?');">üóëÔ∏è</button>
                </form>
            </td>
        </tr>
        {% else %}
        <tr><td colspan="4">No hay maestros registrados a√∫n.</td></tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="text-align:center; color:#a00;">‚ö†Ô∏è No hay un ciclo activo. Activa un ciclo antes de importar maestros.</p>
    {% endif %}
</div>

<script>
setTimeout(() => {
    document.querySelectorAll('.toast').forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(-10px)';
        setTimeout(() => el.remove(), 600);
    });
}, 3000);
</script>
</body>
</html>
