<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Muro de Valores â€“ {{ ciclo.nombre }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/public_muro.css') }}">
</head>
<body>

<header class="muro-header">
    <h1>ðŸŒŸ Muro de Valores â€“ {{ ciclo.nombre }}</h1>
    <form method="get" class="filtros">
        <select name="mes" onchange="this.form.submit()">
            {% for e in eventos %}
                <option value="{{ e.mes_ordinal }}" {% if mes == e.mes_ordinal %}selected{% endif %}>
                    {{ e.nombre_mes }}
                </option>
            {% endfor %}
        </select>

        <select name="tipo" id="tipoSelect" onchange="this.form.submit()">
            <option value="alumno" {% if tipo == 'alumno' %}selected{% endif %}>Alumnos</option>
            <option value="personal" {% if tipo == 'personal' %}selected{% endif %}>Personal</option>
        </select>

        <select name="bloque" id="bloqueSelect" onchange="this.form.submit()">
            <option value="">Todos los bloques</option>
            {% for b in bloques %}
                <option value="{{ b.id }}" {% if bloque_id == b.id %}selected{% endif %}>{{ b.nombre }}</option>
            {% endfor %}
        </select>
    </form>
</header>

<main class="muro-container">
    {% if nominaciones %}
        {% for n in nominaciones %}
        <div class="tarjeta visible">
            
            <!-- ðŸŒŸ Estrella con nÃºmero -->
            <div class="estrella">
                <svg viewBox="0 0 24 24">
                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                </svg>
                <span class="numero">{{ n.valores|length }}</span>
            </div>

            <h2 class="nombre">{{ n.nombre }}</h2>

            <p><strong>Valores:</strong>
                {% for v in n.valores %}
                    <span class="valor-chip">{{ v }}</span>
                {% endfor %}
            </p>

            {% if n.bloque %}
            <p><strong>Bloque:</strong> {{ n.bloque }}</p>
            {% endif %}

            <small>Evento: {{ n.evento }}</small>
        </div>
        {% endfor %}
    {% else %}
        <p class="sin-resultados">ðŸ˜… No hay nominaciones registradas para los filtros seleccionados.</p>
    {% endif %}
</main>

<footer class="muro-footer">
    <p>Â© {{ ciclo.nombre }} â€“ Instituto Moderno Americano</p>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const tipoSelect = document.getElementById('tipoSelect');
    const bloqueSelect = document.getElementById('bloqueSelect');

    function toggleBloque() {
        bloqueSelect.style.display = (tipoSelect.value === 'personal') ? 'none' : 'inline-block';
    }
    tipoSelect.addEventListener('change', toggleBloque);
    toggleBloque();
});
</script>

</body>
</html>
